{"version":3,"file":"main-30be7784.js","sources":["../../src/js/pixabay-api.js","../../src/js/render-functions.js","../../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const API_KEY = '44391753-f60266e3ce72fa57ae00baec0';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&pretty=true&per_page=${perPage}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits \n    }\n  } catch (error) {\n    throw error;\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'inline-block';\n}\n\nexport function hideLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n}\n\nexport function displayImages(images) {\n  if (!Array.isArray(images)) {\n    return;\n  }\n  \n  const gallery = document.getElementById('gallery');\n  const imageElements = images.map(image => `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"info\">\n        <p><strong>Likes:</strong><br>${image.likes}</p>\n        <p><strong>Views:</strong><br>${image.views}</p>\n        <p><strong>Comments:</strong><br>${image.comments}</p>\n        <p><strong>Downloads:</strong><br>${image.downloads}</p>\n      </div>\n    </div>\n  `).join('');\n  \n  gallery.insertAdjacentHTML('beforeend', imageElements);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    title: 'No results',\n    message: 'No images found for your query',\n    position: 'topRight'\n  });\n}\n\nexport function showErrorMessage(error) {\n  iziToast.error({\n    title: 'Error',\n    message: error.message,\n    position: 'topRight'\n  });\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'inline-block';\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'none';\n}\n","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {  \n  clearGallery, \n  showLoading, \n  hideLoading, \n  displayImages, \n  showNoResultsMessage, \n  showErrorMessage, \n  showLoadMoreButton, \n  hideLoadMoreButton \n} from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet perPage = 15;\n\ndocument.getElementById('searchButton').addEventListener('click', async () => {\n  currentQuery = document.getElementById('searchInput').value.trim();\n  if (currentQuery === '') {\n    return;\n  }\n\n  currentPage = 1;\n  perPage = 15; \n  clearGallery();\n  hideLoadMoreButton();\n  showLoading();\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage, perPage);\n    hideLoading();\n\n    if (hits.length === 0) {\n      showNoResultsMessage();\n    } else {\n      displayImages(hits);\n      smoothScrollGallery();\n      showLoadMoreButton();\n    }\n    if (currentPage * perPage >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight'\n      });\n    }\n\n  } catch (error) {\n    hideLoading();\n    showErrorMessage(error);\n  }\n});\nfunction smoothScrollGallery() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (!galleryItem) {\n    return;\n  }\n  \n  const cardHeight = galleryItem.getBoundingClientRect().height;\n  const scrollAmount = cardHeight * 2; // Прокручиваем на высоту двух карточек галереи\n  \n  window.scrollBy({\n    top: scrollAmount,\n    behavior: 'smooth'\n  });\n}\ndocument.getElementById('loadMoreButton').addEventListener('click', async () => {\n  currentPage++;\n  perPage++;\n  showLoading();\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage, perPage);\n    hideLoading();\n\n    if (hits.length === 0) {\n      showNoResultsMessage();\n    } else {\n      displayImages(hits);\n\n      if (currentPage * perPage >= totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight'\n        });\n      }\n    }\n  } catch (error) {\n    hideLoading();\n    showErrorMessage(error);\n  }\n});\n"],"names":["fetchImages","query","page","perPage","url","response","axios","error","lightbox","clearGallery","gallery","showLoading","loader","hideLoading","displayImages","images","imageElements","image","SimpleLightbox","showNoResultsMessage","iziToast","showErrorMessage","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","currentPage","currentQuery","hits","totalHits","smoothScrollGallery","galleryItem","scrollAmount"],"mappings":"6vBAEO,eAAeA,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAI/D,MAAMC,EAAM,qEAAgC,mBAAmBH,CAAK,CAAC,0CAA0CE,CAAO,SAASD,CAAI,GAEnI,GAAI,CACF,MAAMG,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAEpC,MAAO,CACL,KAAMC,EAAS,KAAK,KACpB,UAAWA,EAAS,KAAK,SAC1B,CACF,OAAQE,EAAO,CACd,MAAMA,CACP,CACH,CCbA,IAAIC,EAEG,SAASC,GAAe,CAC7B,MAAMC,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAY,EACtB,CAEO,SAASC,GAAc,CAC5B,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,cACzB,CAEO,SAASC,GAAc,CAC5B,MAAMD,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,MACzB,CAEO,SAASE,EAAcC,EAAQ,CACpC,GAAI,CAAC,MAAM,QAAQA,CAAM,EACvB,OAGF,MAAML,EAAU,SAAS,eAAe,SAAS,EAC3CM,EAAgBD,EAAO,IAAIE,GAAS;AAAA;AAAA,iBAE3BA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,wCAGlBA,EAAM,KAAK;AAAA,wCACXA,EAAM,KAAK;AAAA,2CACRA,EAAM,QAAQ;AAAA,4CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAGxD,EAAE,KAAK,EAAE,EAEVP,EAAQ,mBAAmB,YAAaM,CAAa,EAEjDR,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIU,EAAe,YAAY,CAE9C,CAGO,SAASC,GAAuB,CACrCC,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,iCACT,SAAU,UACd,CAAG,CACH,CAEO,SAASC,EAAiBd,EAAO,CACtCa,EAAS,MAAM,CACb,MAAO,QACP,QAASb,EAAM,QACf,SAAU,UACd,CAAG,CACH,CAEO,SAASe,GAAqB,CACnC,MAAMC,EAAiB,SAAS,eAAe,gBAAgB,EAC/DA,EAAe,MAAM,QAAU,cACjC,CAEO,SAASC,GAAqB,CACnC,MAAMD,EAAiB,SAAS,eAAe,gBAAgB,EAC/DA,EAAe,MAAM,QAAU,MACjC,CC1DA,IAAIE,EAAc,EACdC,EAAe,GACfvB,EAAU,GAEd,SAAS,eAAe,cAAc,EAAE,iBAAiB,QAAS,SAAY,CAE5E,GADAuB,EAAe,SAAS,eAAe,aAAa,EAAE,MAAM,OACxDA,IAAiB,GAIrB,CAAAD,EAAc,EACdtB,EAAU,GACVM,IACAe,IACAb,IAEA,GAAI,CACF,KAAM,CAAE,KAAAgB,EAAM,UAAAC,GAAc,MAAM5B,EAAY0B,EAAcD,EAAatB,CAAO,EAChFU,IAEIc,EAAK,SAAW,EAClBR,KAEAL,EAAca,CAAI,EAClBE,IACAP,KAEEG,EAActB,GAAWyB,IAC3BJ,IACAJ,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAGJ,OAAQb,EAAO,CACdM,IACAQ,EAAiBd,CAAK,CACvB,EACH,CAAC,EACD,SAASsB,GAAsB,CAC7B,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAI,CAACA,EACH,OAIF,MAAMC,EADaD,EAAY,sBAAqB,EAAG,OACrB,EAElC,OAAO,SAAS,CACd,IAAKC,EACL,SAAU,QACd,CAAG,CACH,CACA,SAAS,eAAe,gBAAgB,EAAE,iBAAiB,QAAS,SAAY,CAC9EN,IACAtB,IACAQ,IAEA,GAAI,CACF,KAAM,CAAE,KAAAgB,EAAM,UAAAC,GAAc,MAAM5B,EAAY0B,EAAcD,EAAatB,CAAO,EAChFU,IAEIc,EAAK,SAAW,EAClBR,KAEAL,EAAca,CAAI,EAEdF,EAActB,GAAWyB,IAC3BJ,IACAJ,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,UACpB,CAAS,GAGN,OAAQb,EAAO,CACdM,IACAQ,EAAiBd,CAAK,CACvB,CACH,CAAC"}